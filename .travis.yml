language: minimal

matrix:
  include:
    - arch: amd64
    - name: Linux ARM64
      env: IMAGE=maven:3-jdk-11
      arch: arm64-graviton2
      virt: lxd
      group: edge
      os: linux
      dist: focal

services:
  - docker
before_install:
  - df -h
  - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
  - sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
  - sudo add-apt-repository "deb [arch=arm64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
  - sudo apt-get update
  - sudo apt-get -y -o Dpkg::Options::="--force-confnew" install docker-ce
  - docker --version
  - lscpu
script: true

after_success:
  - df -h
  
after_failure:
  - df -h
